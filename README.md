﻿# zigbee-zstack

## 目录

```javascript

.
├── Projects/zstack          		          # 用户自定义
│     ├── Samples/ZigbeeZstack/Source	    # 源代码       
│     │   └── App				              # Zstack协议(应用层)
│     │        ├── Base			          # 基站应用	
│     │        └── Lock			          # 门锁应用 
│     ├── Tools				                # 配置文件
│     └── ZMain				                # 启动程序   
└── Components				              # Ti公司定义
      ├── hal             			      # 硬件驱动
      ├── mac          			          # MAC层
      ├── mt          			          # 串口通信
      ├── osal           			          # 操作系统
      ├── services            		      # 地址处理
      ├── stack               		      # Zstack协议(网络层、AF射频、ZDO等)
      └── zmac				              # MAC层
```


## 驱动端口配置


| 端口          |     配置说明 | 
| :--------     | :--------|
| P1_5          |  LED灯，配置为输出 |
| P0_1          |  钥匙开门，配置为输入，上升沿触发中断 |






## 进度记录

| 日期      |     进度 |
| :-------- | :--------|
| 2016/12/13    |  Z-Stack工程的建立，加入了基站和门锁的应用层程序。 |
| 2016/12/14    |  门锁低功耗模式，设计为PM2功耗模式,采用休眠-唤醒-休眠的工作模式。每1s向基站发送data request，获取基站的命令数据。 |
| 2016/12/15    |  设置门锁离线定时程序，每隔1s启动离线程序，修改了LED底层驱动，目前只是实现了LED 1s闪烁，后期需要加入RFID读卡程序。 |
| 2016/12/16    |  修改底层按键硬件驱动，测试了按键的轮询扫描模式和中断触发模式成功，最后使用中断模式，轮询扫描模式每隔100ms扫描按键有无按下，效率低反应慢。 |
